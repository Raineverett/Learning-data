<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>è‹±æ–‡æ‹¼å­—è½å¯«æ¸¬é©—</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 30px; }
    input[type="text"], select { padding: 8px; font-size: 18px; width: 300px; margin: 10px; }
    button { padding: 10px 20px; font-size: 16px; margin: 10px; }
    #result, #stats { font-size: 20px; margin-top: 20px; }
    .sectionFilter { margin: 0 10px; }
  </style>
</head>
<body>

<h2>ğŸ”Š è‹±æ–‡æ‹¼å­—è½å¯«æ¸¬é©—</h2>
<p>ç³»çµ±æœƒå¿µå‡ºè‹±æ–‡å–®å­—ï¼Œè«‹è¼¸å…¥æ­£ç¢ºæ‹¼å¯«</p>

<div>
  <label><input type="checkbox" class="sectionFilter" value="1"> Part 1</label>
  <label><input type="checkbox" class="sectionFilter" value="2"> Part 2</label>
  <label><input type="checkbox" class="sectionFilter" value="3"> Part 3</label>
  <label><input type="checkbox" class="sectionFilter" value="4"> Part 4</label>
  <label><input type="checkbox" class="sectionFilter" value="15"> Week 15</label>
  <label><input type="checkbox" class="sectionFilter" value="16"> Week 16</label>
  <label><input type="checkbox" class="sectionFilter" value="17"> Week 17</label>
  <label><input type="checkbox" class="sectionFilter" value="18"> Week 18</label>
  <br>
  <button onclick="selectAll()">å…¨é¸</button>
  <button onclick="clearAll()">æ¸…é™¤é¸æ“‡</button>
</div>

<label for="countSelect">é¡Œæ•¸ï¼š</label>
<select id="countSelect">
  <option value="10">10</option>
  <option value="15">15</option>
  <option value="20">20</option>
  <option value="25">25</option>
</select>

<label for="rateSelect">èªé€Ÿï¼š</label>
<select id="rateSelect">
  <option value="0.6">æ…¢é€Ÿ</option>
  <option value="0.8" selected>ä¸­é€Ÿ</option>
  <option value="1.2">å¿«é€Ÿ</option>
</select>
<br>

<button onclick="startQuiz()">é–‹å§‹æ¸¬é©—</button>
<button onclick="nextQuestion()" disabled id="nextBtn">ä¸‹ä¸€é¡Œ</button>
<button onclick="repeatAudio()" disabled id="repeatBtn">å†è½ä¸€æ¬¡</button>
<br><br>

<input type="text" id="answerInput" placeholder="è«‹è¼¸å…¥è‹±æ–‡å–®å­—" disabled>
<button onclick="checkAnswer()" id="submitBtn" disabled>æäº¤</button>

<div id="result"></div>
<div id="stats"></div>

<script>
// âœ… å–®å­—åº« 
const vocabParts = {
  1: [
    "abandon","accuse","alter","anchor","anchovy","annual","arrowhead","artichoke","assistant","astonish",
    "astronaut","bellow","biscuit","bodyguard","bronze","bulge","bumble","butcher","candidate","champion",
    "channel","commit","compete","conflict","constantly"
  ],
  2: [
    "criminal","elevation","embrace","encounter","entertain","exceed","feeble","fierce","fossil","gallop",
    "grizzly","harmony","heir","horror","humble","humor","inspire","instruct","knuckle","ladle",
    "lynx","maiden","marble","melody","mercy"
  ],
  3: [
    "mulberry","mumble","museum","musician","mustang","mustard","myrtle","nebula","neglect","oyster",
    "parcel","parlor","plunge","praise","priest","process","product","propose","qualify","quarrel",
    "realm","reign","rejoice","relative","retreat"
  ],
  4: [
    "saddle","sagebrush","scamper","scarce","serious","severe","similar","sincere","startle","stumble",
    "syrup","telegram","tread","tumble","twinkle","university","virtue","voyage","watercress","weapon",
    "weave","wicked","width","wobble","wrath"
  ],
  15: [
    "bang","catch","chef","chemist","fresh","shovel","shrubs","shrugged","sting","trash",
    "which","whisper","whistle","benches","branches","change","chart","cheer","choose","chorus",
    "latch","machine","mechanic","parachute","pinch","ranch","search","stomach","torch",
    "wedge","bandage","bridge","cottage","fudge","sausage","trudge","garbage","lodge","hedge",
    "badge","cabbage","manage","luggage","judge","damage","dodge","package","average","fragile",
    "image","pledge","voyage","journal","reminded","yawning","notebook","worn out","message",
    "historical","figure","famous","landmarks","colonists","cargo","harbor","lanterns","church",
    "history","period","Boston"
  ],
  16: [
    "alphabet","cough","dolphins","laugh","microphone","nephew","phoned","photo","rough","tough","trophy",
    "ferries","crutches","monkeys","leashes","blueberries","taxes","dollars","countries","inches","trolleys",
    "radishes","suitcases","brushes","eagles","umbrellas","ashes","numbers","shoelaces","sandwiches","bicycles",
    "dragonflies","galleries","marshes","relishes","smudges","notice","recess","advice","spruce","twice",
    "sentence","prance","device","surface","princess","faucet","slice","chance","office","splice","iceberg",
    "spice","brace","price","service","distance","fancy","instance","science","landed","seaport","island",
    "signal","sturdy","remarked","destroyed","control","coal","lenses","metal","reflectors","stormy","keepers",
    "wrecks","shipwreck","old-fashioned","steel","towers","beamed"
  ],
  17: [
    "ache","chorus","machine","match","patch","ranch","should","shrill","shrink","square",
    "telephone","thirty","throw","whales","whiskers","actor","ballplayer","bricklayer","doctor","builder",
    "dancer","sailor","creator","plumber","printer","inventor","ranger","roofer","singer","swimmer",
    "teacher","decorator","welder","manager","author","conductor","baby-sitter","governor","moderator",
    "New England","wad","bubble gum","superhero","sheared","wool","dyed","wild berries","knitted",
    "scarves","events","paused","looked toward","mess"
  ],
  18: [
    "whole","anxiously","instructor","beginners","chairlift","slopes","lodge","backward","skis",
    "sprawled","tangle","plopped","wobbled","awkwardly","side by side","struggling","sideways","glided",
    "tips","facedown","meant","give up","encouragement","suddenly","realized","complete","balance",
    "champion","disabilities","championships","artificial legs","except","sleepyhead","mumbled","sneakers",
    "tossed","buildings","load","unload","package","factories","memory","replace","goods"
  ]
};


let quizWords = [];
let currentWord = null;
let currentIndex = 0;
let correctCount = 0;

// âœ… å…¨é¸ / æ¸…é™¤
function selectAll() {
  document.querySelectorAll('.sectionFilter').forEach(cb => cb.checked = true);
}
function clearAll() {
  document.querySelectorAll('.sectionFilter').forEach(cb => cb.checked = false);
}

// âœ… é–‹å§‹æ¸¬é©—
function startQuiz() {
  const count = parseInt(document.getElementById("countSelect").value);
  const checkedSections = Array.from(document.querySelectorAll('.sectionFilter:checked')).map(cb => cb.value);

  if (checkedSections.length === 0) {
    alert("è«‹è‡³å°‘å‹¾é¸ä¸€å€‹æ¸¬é©—å€æ®µï¼");
    return;
  }

  let sourceWords = [];
  checkedSections.forEach(sec => {
    sourceWords = sourceWords.concat(vocabParts[sec]);
  });

  quizWords = sourceWords.sort(() => 0.5 - Math.random()).slice(0, count);
  currentIndex = 0;
  correctCount = 0;
  document.getElementById("stats").textContent = "";
  document.getElementById("result").textContent = "";
  document.getElementById("nextBtn").disabled = true;
  document.getElementById("submitBtn").disabled = false;
  document.getElementById("repeatBtn").disabled = false;
  document.getElementById("answerInput").disabled = false;
  nextQuestion();
}

// âœ… ä¸‹ä¸€é¡Œ
function nextQuestion() {
  if (currentIndex >= quizWords.length) {
    const score = Math.round((correctCount / quizWords.length) * 100);
    document.getElementById("result").textContent = `ğŸ‰ æ¸¬é©—çµæŸï¼å…±ç­”å° ${correctCount} é¡Œï¼Œæˆç¸¾ï¼š${score}%`;
    document.getElementById("nextBtn").disabled = true;
    document.getElementById("submitBtn").disabled = true;
    document.getElementById("repeatBtn").disabled = true;
    document.getElementById("answerInput").disabled = true;
    return;
  }

  currentWord = quizWords[currentIndex];
  speakWord(currentWord);
  document.getElementById("answerInput").value = "";
  document.getElementById("result").textContent = "";
  document.getElementById("nextBtn").disabled = true;
  document.getElementById("submitBtn").disabled = false;
  document.getElementById("repeatBtn").disabled = false;
  document.getElementById("answerInput").disabled = false;
  document.getElementById("answerInput").focus();
}

// âœ… æª¢æŸ¥ç­”æ¡ˆ
function checkAnswer() {
  const userAnswer = document.getElementById("answerInput").value.trim().toLowerCase();
  if (!currentWord) return;

  if (userAnswer === currentWord.toLowerCase()) {
    document.getElementById("result").textContent = "âœ… æ­£ç¢ºï¼";
    correctCount++;
  } else {
    document.getElementById("result").textContent = `âŒ éŒ¯èª¤ï¼Œæ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š${currentWord}`;
  }

  currentIndex++;
  document.getElementById("nextBtn").disabled = false;
  document.getElementById("submitBtn").disabled = true;
  document.getElementById("repeatBtn").disabled = true;
  document.getElementById("answerInput").disabled = true;

  document.getElementById("stats").textContent = `ç›®å‰é€²åº¦ï¼š${currentIndex} / ${quizWords.length}ã€€ç­”å°ï¼š${correctCount}`;
}

// âœ… é‡æ’­éŸ³æª”
function repeatAudio() {
  if (currentWord) speakWord(currentWord);
}

// âœ… èªéŸ³æ’­æ”¾
function speakWord(word) {
  const rate = parseFloat(document.getElementById("rateSelect").value);
  const utterance = new SpeechSynthesisUtterance(word);
  utterance.lang = 'en-US';
  utterance.rate = rate;
  speechSynthesis.speak(utterance);
}

// âœ… Enter éµæäº¤
window.onload = function () {
  document.getElementById("answerInput").addEventListener("keydown", function (event) {
    if (event.key === "Enter" && !document.getElementById("submitBtn").disabled) {
      checkAnswer();
    }
  });
};
</script>

</body>
</html>
